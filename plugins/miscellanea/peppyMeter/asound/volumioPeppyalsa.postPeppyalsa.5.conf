pcm.volumioPeppyalsa {
  type plug
  route_policy "duplicate"
  slave.channels 4
  slave.format "unchanged"
  slave.rate "unchanged"

  slave.pcm {
    type multi;

    slaves.a.pcm postpeppyalsa
    slaves.a.channels 2;

    slaves.b.pcm reformat
    slaves.b.channels 2;

    bindings.0.slave a;
    bindings.0.channel 0;
    bindings.1.slave a;
    bindings.1.channel 1;

    bindings.2.slave b
    bindings.2.channel 0
    bindings.3.slave b
    bindings.3.channel 1
    }
}

pcm.reformat {
  type plug 
slave {
    pcm "mypeppy"
    format "S16_LE" 
    #rate "unchanged" 
    #channels "unchanged"
  }
}

pcm.mypeppy {
  type meter
  slave.pcm 'plughw:CARD=Dummy,DEV=0'
  scopes.0 peppyalsa
}

pcm_scope.peppyalsa {
  type peppyalsa
  decay_ms 400
  meter "/tmp/myfifopeppy"
  meter_max 100
  meter_show 1
  spectrum "/tmp/myfifosapeppy"
  spectrum_max 100
  spectrum_size 30
}

pcm_scope_type.peppyalsa {
    lib /usr/local/lib/libpeppyalsa.so
}

pcm.postpeppyalsa {
  type copy
  slave.pcm "postPeppyalsa"
}
